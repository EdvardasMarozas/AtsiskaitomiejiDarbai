<%- include("../layout/header") %>

<div class="container">
  <h1><%= title %></h1>
  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Image</th>
        <th scope="col">Name</th>
        <th scope="col" class="text-end">Control</th>
      </tr>
    </thead>
    <tbody>
      <% for (let i in pets) { %>
      <tr>
        <th scope="row"><%= pets[i].ID %></th>
        <td>
          <img src="images/<%= pets[i].image%>" style="max-height: 40px" />
        </td>
        <td><a href="/petwars/adminpanel/<%= pets[i].ID %>"><%= pets[i].name %></a></td>
        <td class="d-flex justify-content-end gap-2 pb-4">
            <a class="btn btn-outline-primary btn-sm" href="/petwars/adminpanel/<%= pets[i].ID %>/edit"><i class="bi bi-pencil-square"></i> EDIT</a> 
            <form action="/petwars/adminpanel/<%= pets[i].ID %>" method="post">
              <input type="hidden" name="_method" value="DELETE">
              <a class="delete_link btn btn-outline-danger btn-sm" href="#"><i class="bi bi-trash3"></i> DELETE</a> 
            </form>
          </td>
      </tr>
      <% } %>
    </tbody>
  </table>

  <p>
    <a class="btn btn-outline-secondary btn-sm" href="/petwars"> GO BACK</a>
  </p>

</div>

<script>
    const delete_links = document.getElementsByClassName("delete_link");
    if (delete_links.length){
      for (let i = 0; i < delete_links.length; i++) {
        delete_links[i].addEventListener("click", (evt) => {
          evt.preventDefault();
          if (confirm('Are you sure you want to delete this!')) {
            evt.currentTarget.parentNode.submit();
          }
          return false;
        });
      }
    }
  </script>

  <%- include("../layout/footer") %>